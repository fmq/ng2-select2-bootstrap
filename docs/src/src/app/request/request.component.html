<section>
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <h1 class="section-heading">Select Request</h1>
                <div class="section-paragraph">
                    <div class="row">
                        <div class="col-md-12">
                            Valor selecionado: {{valorSelecionado | json}}
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-8">
                            <template #templateResultado let-valor>
                                <div style="padding-top: 4px;padding-bottom: 3px;">
                                    <div style="float: left;width: 60px;margin-right: 10px;">
                                        <img [src]="valor.owner.avatar_url" width="60">
                                    </div>
                                    <div style="margin-left: 70px;">
                                        <div style="color: black">{{valor.name}}</div>
                                        <div style="font-size: 13px;color: black;margin-top: 4px;">{{valor.description}}</div>
                                        <div>
                                            <div style="display: inline-block;color: black;font-size: 11px;margin-right: 1em;">
                                                <i class="fa fa-flash"></i>
                                                {{valor.forks_count}}
                                                Forks
                                            </div>
                                            <div style="display: inline-block;color: black;font-size: 11px;margin-right: 1em;">
                                                <i class="fa fa-star"></i> {{valor.stargazers_count}} Stars
                                            </div>
                                            <div style="display: inline-block;color: black;font-size: 11px;margin-right: 1em;">
                                                <i class="fa fa-eye"></i>
                                                {{valor.watchers_count}} Watchers
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </template>
                            <h3>Digite um nome de repositório do github</h3>
                            <select2-request
                                    [(ngModel)]="valorSelecionado"
                                    [templateResultado]="templateResultado"
                                    url="https://api.github.com/search/repositories"
                                    minimoCaracteres="1"
                                    (onAbrir)="log('onAbrir', $event)"
                                    (onFechar)="log('onFechar', $event)"
                                    (onBuscar)="log('onBuscar', $event)"
                                    (change)="log('change', $event)"
                                    (onSelecionarItem)="log('onSelecionarItem', $event)"
                                    (onLimpar)="log('onLimpar', $event)"
                                    (onErro)="log('onErro', $event)"
                                    (onProcessaParametros)="processaParametros($event)"
                                    (onProcessaResultado)="processaResultado($event)"
                                    indiceNome="name"
                            >
                            </select2-request>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-4">
                            <h4>Logs</h4>
                            <log [logs]="logs"></log>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-12">
                            <tabset>
                                <tab heading='Documentação'>
                                    <div class="row">
                                        <div class="col-md-12">
                                            <h2>Inputs</h2>
                                            <table class="table table-bordered">
                                                <thead>
                                                    <tr>
                                                        <th><strong>Nome</strong></th>
                                                        <th>Tipo</th>
                                                        <th>Valor Padrão</th>
                                                        <th>Descrição</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr>
                                                        <td><strong>minimoCaracteres</strong></td>
                                                        <td>number</td>
                                                        <td>0</td>
                                                        <td>Quantidade de mínimo para realizar a busca</td>
                                                    </tr>
                                                    <tr>
                                                        <td><strong>disabled</strong></td>
                                                        <td>boolean</td>
                                                        <td>false</td>
                                                        <td>Indica se é somente leitura o select</td>
                                                    </tr>
                                                    <tr>
                                                        <td><strong>placeholder</strong></td>
                                                        <td>string</td>
                                                        <td>Selecione</td>
                                                        <td>Placeholder quando não houver item selecionado</td>
                                                    </tr>
                                                    <tr>
                                                        <td><strong>templateResultado</strong></td>
                                                        <td>TemplateRef</td>
                                                        <td></td>
                                                        <td>Template da lista de itens exibidos</td>
                                                    </tr>
                                                    <tr>
                                                        <td><strong>templateSelecionado</strong></td>
                                                        <td>TemplateRef</td>
                                                        <td></td>
                                                        <td>Template quando selecionar um item</td>
                                                    </tr>
                                                    <tr>
                                                        <td><strong>templateSemResultado</strong></td>
                                                        <td>TemplateRef</td>
                                                        <td>{{ {pesquisa:'Valor Pesquisado'} | json }}</td>
                                                        <td>Template quando não houver item na busca</td>
                                                    </tr>
                                                    <tr>
                                                        <td><strong>templateBuscando</strong></td>
                                                        <td>TemplateRef</td>
                                                        <td></td>
                                                        <td>Template quando estiver buscando no servdor</td>
                                                    </tr>
                                                    <tr>
                                                        <td><strong>indiceId</strong></td>
                                                        <td>string</td>
                                                        <td>id</td>
                                                        <td>O valor da posição que se encontra o id primario</td>
                                                    </tr>
                                                    <tr>
                                                        <td><strong>indiceNome</strong></td>
                                                        <td>string</td>
                                                        <td>nome</td>
                                                        <td>O valor da posição que se encontra o nome a ser exibido</td>
                                                    </tr>

                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-12">
                                            <h2>Outputs</h2>
                                            <table class="table table-bordered">
                                                <thead>
                                                    <tr>
                                                        <th><strong>Nome</strong></th>
                                                        <th>Tipo</th>
                                                        <th>Valor Saída</th>
                                                        <th>Descrição</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr>
                                                        <td><strong>onProcessaParametros</strong></td>
                                                        <td>object</td>
                                                        <td>{{ objProcessaParametros | json }}</td>
                                                        <td>É chamado quando vai fazer a pesquisa no servidor. Atribua na posição 'retorno' o que você quer adicionar na url, veja o código de exemplo</td>
                                                    </tr>
                                                    <tr>
                                                        <td><strong>onProcessaResultado</strong></td>
                                                        <td>object</td>
                                                        <td>{{ objProcessaResultado | json }}</td>
                                                        <td>É chamado quando termina de executar a busca. A posição 'enviado' é o que retornou na requisição, atribua a posição 'retorno' o que você gostaria de exibir no select, veja o código de exemplo</td>
                                                    </tr>
                                                    <tr>
                                                        <td><strong>onAbrir</strong></td>
                                                        <td>boolean</td>
                                                        <td>true</td>
                                                        <td>Dispara quando abre o elemento</td>
                                                    </tr>
                                                    <tr>
                                                        <td><strong>onBuscar</strong></td>
                                                        <td>string</td>
                                                        <td></td>
                                                        <td>Dispara quando faz alguma busca informando o que foi digitado</td>
                                                    </tr>
                                                    <tr>
                                                        <td><strong>onSelecionarItem</strong></td>
                                                        <td>object</td>
                                                        <td></td>
                                                        <td>Dispara quando seleciona um item passando o item selecionado</td>
                                                    </tr>
                                                    <tr>
                                                        <td><strong>onLimpar</strong></td>
                                                        <td>boolean</td>
                                                        <td>true</td>
                                                        <td>Dispara quando limpa o elemento</td>
                                                    </tr>
                                                    <tr>
                                                        <td><strong>onFechar</strong></td>
                                                        <td>boolean</td>
                                                        <td>true</td>
                                                        <td>Dispara quando fecha o elemento</td>
                                                    </tr>
                                                    <tr>
                                                        <td><strong>onErro</strong></td>
                                                        <td>boolean</td>
                                                        <td>object</td>
                                                        <td>Dispara quando acontece um erro na requisição</td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </tab>
                                <tab heading="Código Fonte">
                                    <div class="row">
                                        <div class="col-md-12">
                                            <h3>HTML</h3>
                                            <pre class="prettyprint linenums"><code class="language-html">{{codigoUtilizado}}</code></pre>

                                            <h3>COMPONENT</h3>
                                            <pre class="prettyprint linenums"><code class="language-javascript">{{codigoUtilizadoComponent}}</code></pre>
                                        </div>
                                    </div>
                                </tab>
                            </tabset>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
